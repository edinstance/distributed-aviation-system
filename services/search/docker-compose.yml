services:
  search-service:
    build: .
    container_name: search-service
    ports:
      - "8082:8082"
    environment:
      ENVIRONMENT: ${ENVIRONMENT:-prod}
      PORT: 8082
      OTEL_SERVICE_NAME: search-service
      OTEL_EXPORTER_OTLP_ENDPOINT: http://otel-collector:4317
      OTEL_EXPORTER_OTLP_PROTOCOL: grpc
      OTEL_TRACES_EXPORTER: otlp
      OTEL_METRICS_EXPORTER: otlp
      OTEL_LOGS_EXPORTER: otlp
      OTEL_METRIC_EXPORT_INTERVAL: 5000
      OTEL_BSP_SCHEDULE_DELAY: 5000
    healthcheck:
      test: [ "CMD-SHELL", "curl -f http://localhost:8082/details/health || exit 1" ]
      interval: 10s
      timeout: 10s
      retries: 5
      start_period: 10s
    networks:
      - aviation-network

networks:
  aviation-network:
    name: aviation-network
    driver: bridge