supergraph:
  listen: 0.0.0.0:4000
  path: /

health_check:
  enabled: true
  listen: 0.0.0.0:8088
  path: /health

include_subgraph_errors:
  all: true
  subgraphs:
    flights: true
    aircraft: true

headers:
  all:
    request:
      - propagate:
          named: x-user-sub
      - propagate:
          named: x-org-id
      - propagate:
          named: x-org-name
      - propagate:
          named: x-user-roles

telemetry:
  exporters:
    tracing:
      common:
        service_namespace: "aviation-system"
        service_name: "graphql-router"
      otlp:
        enabled: true
        endpoint: http://otel-collector:4317
        protocol: grpc
    metrics:
      common:
        service_namespace: "aviation-system"
        service_name: "graphql-router"
      otlp:
        enabled: true
        endpoint: http://otel-collector:4317
        protocol: grpc
    logging:
      stdout:
        enabled: true
        format:
          json:
            display_level: true
            display_trace_id: hexadecimal
            display_timestamp: true

  instrumentation:
    spans:
      mode: spec_compliant
      router:
        attributes:
          service_name: router
      supergraph:
        attributes:
          service_name: supergraph
      subgraph:
        attributes:
          service_name: subgraph